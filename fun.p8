pico-8 cartridge // http://www.pico-8.com
version 35
__lua__
-- fun
-- by morganquirk

px = 64
py = 64

function _init()
    cls()
    music()
end


function speed_to_bpm(speed, notes_per_beat)
    return 60 / (speed / (120 / notes_per_beat))
end

local last_mt = 0
local m = 0
local deltas = {}
function _draw()
    cls()
    --rectfill(0,0,128,128,5)
    local mt = stat(50)
    print(mt, nil, nil, 7)
    spr(1, px - 4, py - 4)
    local delta = mt - last_mt
    if delta < 0 then delta = 1 end
    add(deltas, delta * 100)
    print(delta, 5)
    if #deltas > 1000 then
        deli(deltas, 1)
    end
    local avg = 0
    for i = 1, #deltas do
        avg += deltas[i]
    end
    avg /= #deltas
    print(100 / avg, 8)
    last_mt = mt
end

function _update()
    if btn(0) then px -= 1 end
    if btn(1) then px += 1 end
    if btn(2) then py -= 1 end
    if btn(3) then py += 1 end
end
__gfx__
00000000000770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000b0770b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000bb3663b30000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000bb3b33b30000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005b35000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000650000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000b30000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000006655000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
010f00001205300000000000000010623000000000000000120530000000000000001062300000000000000012053000000000000000106230000000000000001205300000000000000010623000000000000000
__music__
03 00424344

